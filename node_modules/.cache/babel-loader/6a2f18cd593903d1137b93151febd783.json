{"ast":null,"code":"var _jsxFileName = \"/Users/yokohamakaito/Desktop/chat/src/dashboard/dashboard.js\";\nimport React from 'react';\nimport ChatList from '../chatList/chatList';\nimport { Button, withStyles } from '@material-ui/core';\nimport styles from './style';\n\nconst firebase = require('firebase');\n\nclass DashbordComponent extends React.Component {\n  constructor() {\n    super();\n\n    this.selectChat = chatIndex => {\n      console.log('Slect', chatIndex);\n    };\n\n    this.newChatBtnClicked = () => this.setState({\n      newChatFormVisible: true,\n      selectedChat: null\n    });\n\n    this.componentDidMount = () => {\n      firebase.auth().onAuthStateChanged(async _user => {\n        if (!_user) this.props.history.push('/login');else {\n          await firebase.firestore().collection('chats').where('users', 'array-contains', _user.email).onSnapshot(async res => {\n            const chats = res.docs.map(_doc => _doc.data());\n            await this.setState({\n              email: _user.email,\n              chats: chats\n            });\n            console.log(this.state);\n          });\n        }\n      });\n    };\n\n    this.state = {\n      selectedChat: null,\n      newChatFormVisible: false,\n      email: null,\n      chats: []\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 5\n      }\n    }, \"Hello world from DashbordComponent\", /*#__PURE__*/React.createElement(ChatList, {\n      history: this.props.history,\n      newChatBtnFn: this.newChatBtnClicked,\n      selectChatFn: this.selectChat,\n      chats: this.state.chats,\n      userEmail: this.state.email,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 9\n      }\n    }, \" \"));\n  }\n\n}\n\nexport default withStyles(styles)(DashbordComponent);","map":{"version":3,"sources":["/Users/yokohamakaito/Desktop/chat/src/dashboard/dashboard.js"],"names":["React","ChatList","Button","withStyles","styles","firebase","require","DashbordComponent","Component","constructor","selectChat","chatIndex","console","log","newChatBtnClicked","setState","newChatFormVisible","selectedChat","componentDidMount","auth","onAuthStateChanged","_user","props","history","push","firestore","collection","where","email","onSnapshot","res","chats","docs","map","_doc","data","state","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,SAAQC,MAAR,EAAeC,UAAf,QAAgC,mBAAhC;AACA,OAAOC,MAAP,MAAmB,SAAnB;;AACA,MAAMC,QAAQ,GAAEC,OAAO,CAAC,UAAD,CAAvB;;AACA,MAAMC,iBAAN,SAAgCP,KAAK,CAACQ,SAAtC,CAA+C;AAC3CC,EAAAA,WAAW,GAAE;AACT;;AADS,SAyBbC,UAzBa,GAyBCC,SAAD,IAAc;AACvBC,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,SAArB;AACH,KA3BY;;AAAA,SA6BbG,iBA7Ba,GA6BO,MAAK,KAAKC,QAAL,CAAc;AAACC,MAAAA,kBAAkB,EAAC,IAApB;AAA0BC,MAAAA,YAAY,EAAC;AAAvC,KAAd,CA7BZ;;AAAA,SA+BbC,iBA/Ba,GA+BO,MAAK;AACrBb,MAAAA,QAAQ,CAACc,IAAT,GAAgBC,kBAAhB,CAAmC,MAAMC,KAAN,IAAc;AAC7C,YAAG,CAACA,KAAJ,EACA,KAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB,EADA,KAEI;AACA,gBAAMnB,QAAQ,CACZoB,SADI,GAEJC,UAFI,CAEO,OAFP,EAGJC,KAHI,CAGE,OAHF,EAGY,gBAHZ,EAG+BN,KAAK,CAACO,KAHrC,EAIJC,UAJI,CAIO,MAAMC,GAAN,IAAY;AACpB,kBAAMC,KAAK,GAAGD,GAAG,CAACE,IAAJ,CAASC,GAAT,CAAaC,IAAI,IAAGA,IAAI,CAACC,IAAL,EAApB,CAAd;AACA,kBAAM,KAAKpB,QAAL,CAAc;AAChBa,cAAAA,KAAK,EAACP,KAAK,CAACO,KADI;AAEhBG,cAAAA,KAAK,EAAEA;AAFS,aAAd,CAAN;AAIAnB,YAAAA,OAAO,CAACC,GAAR,CAAY,KAAKuB,KAAjB;AACH,WAXI,CAAN;AAYH;AACJ,OAjBD;AAkBH,KAlDY;;AAET,SAAKA,KAAL,GAAY;AACRnB,MAAAA,YAAY,EAAC,IADL;AAERD,MAAAA,kBAAkB,EAAC,KAFX;AAGRY,MAAAA,KAAK,EAAC,IAHE;AAIRG,MAAAA,KAAK,EAAC;AAJE,KAAZ;AAMH;;AACDM,EAAAA,MAAM,GAAE;AACZ,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0DAEI,oBAAC,QAAD;AACC,MAAA,OAAO,EAAE,KAAKf,KAAL,CAAWC,OADrB;AAEC,MAAA,YAAY,EAAE,KAAKT,iBAFpB;AAGC,MAAA,YAAY,EAAE,KAAKJ,UAHpB;AAIC,MAAA,KAAK,EAAE,KAAK0B,KAAL,CAAWL,KAJnB;AAKC,MAAA,SAAS,EAAE,KAAKK,KAAL,CAAWR,KALvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAFJ,CADJ;AAaK;;AAxB0C;;AAsD/C,eAAezB,UAAU,CAACC,MAAD,CAAV,CAAmBG,iBAAnB,CAAf","sourcesContent":["import React from 'react';\nimport ChatList from '../chatList/chatList';\nimport {Button,withStyles} from '@material-ui/core'\nimport styles from './style'\nconst firebase =require('firebase')\nclass DashbordComponent extends React.Component{\n    constructor(){\n        super();\n        this.state ={\n            selectedChat:null,\n            newChatFormVisible:false,\n            email:null,\n            chats:[]\n        }\n    }\n    render(){\nreturn (\n    <div>\n        Hello world from DashbordComponent\n        <ChatList\n         history={this.props.history} \n         newChatBtnFn={this.newChatBtnClicked} \n         selectChatFn={this.selectChat}\n         chats={this.state.chats}\n         userEmail={this.state.email}\n         > </ChatList>\n    </div>\n\n)\n    }\n\n    selectChat = (chatIndex) =>{\n        console.log('Slect', chatIndex)\n    }\n\n    newChatBtnClicked = () =>this.setState({newChatFormVisible:true, selectedChat:null})\n\n    componentDidMount = () =>{\n        firebase.auth().onAuthStateChanged(async _user =>{\n            if(!_user)\n            this.props.history.push('/login')\n            else{\n                await firebase\n                 .firestore()\n                 .collection('chats')\n                 .where('users' , 'array-contains' , _user.email)\n                 .onSnapshot(async res =>{\n                     const chats = res.docs.map(_doc =>_doc.data());\n                     await this.setState({\n                         email:_user.email,\n                         chats: chats\n                     });\n                     console.log(this.state)\n                 })\n            }\n        })\n    }\n}\n\nexport default withStyles(styles)(DashbordComponent)"]},"metadata":{},"sourceType":"module"}